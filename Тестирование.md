# Мои заметки о тестировании(JavaScript)

Тут собраны мои небольшие замечания о простейших способах и практиках тестирования кода на языке JS.

### Какие бывают тесты?
------------------------------------
1. Тесты на уязвимости
2. Тесты производительности
3. Функциональные тесты. </br>
Ниже пойдет речь о 3 типе тестов. </br>
В свою очередь Функциональные тесты можно разделить на:
  a. Модульные (тестирование отдельных функций, модулей)
  b. Интеграционные (тестирование большого блока программы)
  c. Системные (тестирование программы со стороны пользователя) </br>
Лучше всего выявляют ошибки именно 3 тип тестов, но именно он самый сложный в осуществлении, так как нужно имитировать реальную работу пользователя.

Как делать тесты? сколько тестов нужно?
Количество тестов должно быть оптимальным. Чтобы определить эту оптимальность можно использовать следующую стратегию, по которой составлять тесты. Этапы:
1. Проверяем позитивный сценарий
2. Проверяем дополнительную функциональность
3. Проверяем пограниченые случаи
Исключить абсолютно все баги практически невозможно и нужно уметь вовремся остановиться. Данная система немного способствует этому, а так же помогает повысить читаемость тестов. 

Теперь перейдем к способам реализации тестов. Для удобства я разделил их на 3 уровня (это не является общепринятой нормой, описание субъективного мнения)

### Базовый (простейший) уровень
------------------------------------
Простейший способ тестирования не нуждается в описании. Достаточно простого примера:

>    `if (func(5) !== [1, 2]) { </br>`
>        `throw new Error('Описание ошибки'); </br>`
>    `}`

### Средний уровень
------------------------------------
Для оптимизации процесса, представленного выше можно использовать встроенный в node.js пакет assert.
Помимо оптимизации повышается удобство чтение тестов (тенденция удобства сохранится и будет расти по мере приближения к высшему уровню).
Пример использования:
`
import assert from 'assert' </br>
assert(func(1) === 1); </br>
const actual = func(3); </br>
const expected = 5; </br>
// equal - Сравнивание по ссылке </br>
assert.equal(actual, expected); </br>
// deepEqual для сравнения значений </br>
// notEqual, notDeepEqual </br>
`
Отличным дополнением является библиотека <power-assets>, которая решает основную проблему вышеперечисленных методов: <power-assets> подробно отображает где и в чем заключается ошибка.
И для решения этого вопроса можно перейти так же к следующему уровню.

### Высший уровень
------------------------------------
Для качественного вывода, максимального повышения удобства чтения и организации тестов существует различные библиотеки. 
Вот некоторые из них:
1. https://www.chaijs.com/
2. https://jestjs.io/ </br>
Для более подробного углубления остановимся на последнем пакете.
Для установки Jest: npm i --save-dev jest .
Для интеграции с babel: npm i --save-dev babel-jest @babel/core @babel/preset-env .
Так же необходимо прописать в babel.config.js:
`
module.exports = { </br>
  presets: [ </br>
    [  </br>
      '@babel/preset-end', </br>
      {  </br>
        targets: { </br>
          node: 'current', </br>
        } </br>
      } </br>
    ] </br>
  ] </br>
}; </br>
`
Тесты Jest необходимо хранить в директории __jest__ и файлы с тестами называть <name>.test.js

Рассмотрим базовые примеры тестирования:
`
test('nameTest', () => { </br>
  expect(func(value)).toEqual(23); </br>
}); </br>
// для запуска тестов npx jest </br>
`
toEqual - матчер. Такое название носят методы сравнений. Таких методов достаточно много и их можно посмотреть в документации https://jestjs.io/docs/ru/expect .
Примеры некоторых самых базовых матчеров:
`
toBeNull() </br>
toBeTruthy() </br>
toBeUndefined() </br>
toContain() // содержит ли массив элемент </br>
toMatch('') // Содержит ли строка подстроку </br>
toHaveProperty('', '') // Пара ключ-значение </br>
.not. // для отрицания матчеров </br>
// Пример: </br>
expect(func(value)).not.toEqual(23); </br>
`